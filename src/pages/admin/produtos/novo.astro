---
import AdminLayout from '../../../layouts/AdminLayout.astro';
import ProductForm from '../../../components/admin/ProductForm';
import { supabase } from '../../../lib/supabase';

const { data: categories } = await supabase
  .from('categories')
  .select('*')
  .order('name');
---

<AdminLayout title="Novo Produto">
  <div class="new-product-page">
    <header class="page-header">
      <div class="breadcrumb">
        <a href="/admin">Dashboard</a>
        <span>/</span>
        <a href="/admin/produtos">Produtos</a>
        <span>/</span>
        <span class="current">Novo</span>
      </div>
    </header>

    <ProductForm categories={categories || []} client:load />
  </div>
</AdminLayout>

<style>
  .new-product-page {
    max-width: 1200px;
  }

  .page-header {
    margin-bottom: 32px;
  }

  .breadcrumb {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.9rem;
    margin-bottom: 16px;
  }

  .breadcrumb a {
    color: var(--text-muted);
  }

  .breadcrumb a:hover {
    color: var(--caramel);
  }

  .breadcrumb span {
    color: var(--text-muted);
  }

  .breadcrumb .current {
    color: var(--caramel);
  }

  .page-header h1 {
    font-size: 1.8rem;
    margin-bottom: 8px;
  }

  .page-header p {
    color: var(--text-muted);
  }
</style>
